{"version":3,"file":"react-geolocation.es.js","sources":["../src/index.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class Geolocation extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      fetchingPosition: false,\n      position: undefined,\n      error: undefined\n    }\n  }\n\n  componentWillMount () {\n    if (typeof window !== 'object') {\n      return\n    }\n\n    if (!('geolocation' in window.navigator)) {\n      return\n    }\n\n    if (this.props.lazy) {\n      return\n    }\n\n    this.getCurrentPosition()\n  }\n\n  componentWillUnmount () {\n    this.willUnmount = true\n  }\n\n  getCurrentPosition = () => {\n    const {\n      enableHighAccuracy,\n      timeout,\n      maximumAge,\n      onSuccess,\n      onError\n    } = this.props\n\n    this.setState({ fetchingPosition: true })\n\n    return window.navigator.geolocation.getCurrentPosition(\n      position => {\n        if (this.willUnmount) return\n\n        this.setState({ position, fetchingPosition: false }, () =>\n          onSuccess(position)\n        )\n      },\n      error => {\n        if (this.willUnmount) return\n\n        this.setState({ error, fetchingPosition: false }, () => onError(error))\n      },\n      { enableHighAccuracy, timeout, maximumAge }\n    )\n  }\n\n  render () {\n    if (!this.props.render) {\n      return null\n    }\n    return (\n      this.props.render({\n        getCurrentPosition: this.getCurrentPosition,\n        fetchingPosition: this.state.fetchingPosition,\n        position: this.state.position,\n        error: this.state.error\n      }) || null\n    )\n  }\n}\n\nGeolocation.propTypes = {\n  // https://developer.mozilla.org/en-US/docs/Web/API/PositionOptions\n  enableHighAccuracy: PropTypes.bool,\n  timeout: PropTypes.number,\n  maximumAge: PropTypes.number,\n  // https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition\n  onSuccess: PropTypes.func,\n  onError: PropTypes.func,\n  // Do not call getCurrentPosition on mount\n  lazy: PropTypes.bool\n}\n\nGeolocation.defaultProps = {\n  enableHighAccuracy: false,\n  timeout: Infinity,\n  maximumAge: 0,\n  onSuccess: pos => {},\n  // eslint-disable-next-line handle-callback-err\n  onError: err => {},\n  lazy: false\n}\n"],"names":["Geolocation","props","getCurrentPosition","enableHighAccuracy","timeout","maximumAge","onSuccess","onError","setState","fetchingPosition","window","navigator","geolocation","willUnmount","position","error","state","undefined","componentWillMount","lazy","componentWillUnmount","render","React","Component","propTypes","PropTypes","bool","number","func","defaultProps","Infinity"],"mappings":";;;;;;;;;;;AAAA,IAGqBA;;;uBACNC,KAAb,EAAoB;;;iDAClB,4BAAMA,KAAN,CADkB;;UA8BpBC,kBA9BoB,GA8BC,YAAM;wBAOrB,MAAKD,KAPgB;UAEvBE,kBAFuB,eAEvBA,kBAFuB;UAGvBC,OAHuB,eAGvBA,OAHuB;UAIvBC,UAJuB,eAIvBA,UAJuB;UAKvBC,SALuB,eAKvBA,SALuB;UAMvBC,OANuB,eAMvBA,OANuB;;;YASpBC,QAAL,CAAc,EAAEC,kBAAkB,IAApB,EAAd;;aAEOC,OAAOC,SAAP,CAAiBC,WAAjB,CAA6BV,kBAA7B,CACL,oBAAY;YACN,MAAKW,WAAT,EAAsB;;cAEjBL,QAAL,CAAc,EAAEM,kBAAF,EAAYL,kBAAkB,KAA9B,EAAd,EAAqD;iBACnDH,UAAUQ,QAAV,CADmD;SAArD;OAJG,EAQL,iBAAS;YACH,MAAKD,WAAT,EAAsB;;cAEjBL,QAAL,CAAc,EAAEO,YAAF,EAASN,kBAAkB,KAA3B,EAAd,EAAkD;iBAAMF,QAAQQ,KAAR,CAAN;SAAlD;OAXG,EAaL,EAAEZ,sCAAF,EAAsBC,gBAAtB,EAA+BC,sBAA/B,EAbK,CAAP;KAzCkB;;UAGbW,KAAL,GAAa;wBACO,KADP;gBAEDC,SAFC;aAGJA;KAHT;;;;wBAOFC,mDAAsB;QAChB,QAAOR,MAAP,yCAAOA,MAAP,OAAkB,QAAtB,EAAgC;;;;QAI5B,EAAE,iBAAiBA,OAAOC,SAA1B,CAAJ,EAA0C;;;;QAItC,KAAKV,KAAL,CAAWkB,IAAf,EAAqB;;;;SAIhBjB,kBAAL;;;wBAGFkB,uDAAwB;SACjBP,WAAL,GAAmB,IAAnB;;;wBA+BFQ,2BAAU;QACJ,CAAC,KAAKpB,KAAL,CAAWoB,MAAhB,EAAwB;aACf,IAAP;;WAGA,KAAKpB,KAAL,CAAWoB,MAAX,CAAkB;0BACI,KAAKnB,kBADT;wBAEE,KAAKc,KAAL,CAAWP,gBAFb;gBAGN,KAAKO,KAAL,CAAWF,QAHL;aAIT,KAAKE,KAAL,CAAWD;KAJpB,KAKM,IANR;;;;EA/DqCO,MAAMC;;AA0E/CvB,YAAYwB,SAAZ,GAAwB;;sBAEFC,UAAUC,IAFR;WAGbD,UAAUE,MAHG;cAIVF,UAAUE,MAJA;;aAMXF,UAAUG,IANC;WAObH,UAAUG,IAPG;;QAShBH,UAAUC;CATlB;;AAYA1B,YAAY6B,YAAZ,GAA2B;sBACL,KADK;WAEhBC,QAFgB;cAGb,CAHa;aAId,wBAAO,EAJO;;WAMhB,sBAAO,EANS;QAOnB;CAPR;;;;"}